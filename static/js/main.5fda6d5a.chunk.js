(this["webpackJsonprestaurant-menu-react-redux-app"]=this["webpackJsonprestaurant-menu-react-redux-app"]||[]).push([[0],{25:function(e,t,r){},42:function(e,t,r){},43:function(e,t,r){},44:function(e,t,r){},45:function(e,t,r){},47:function(e,t,r){},48:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),a=r(19),i=r.n(a),s=r(3),o=r(9),u=r(10),d=r(15),l=r(14),j=(r(25),r(11)),m=r(1),p=function(e){var t=e.item,r=e.onAddToCard,n=t.title,c=t.price,a=t.url,i=t.category,s=t.id,o="menu__title menu__title-".concat(i);return Object(m.jsxs)("li",{className:"menu__item",children:[Object(m.jsxs)(j.b,{className:"menu__link-to-product",to:String(s),children:[Object(m.jsx)("div",{className:o,children:n}),Object(m.jsx)("img",{className:"menu__img",src:a,alt:n}),Object(m.jsxs)("div",{className:"menu__category",children:["Category: ",Object(m.jsx)("span",{children:i})]}),Object(m.jsxs)("div",{className:"menu__price",children:["Price: ",Object(m.jsxs)("span",{children:[c,"$"]})]})]}),Object(m.jsx)("button",{onClick:function(){return r()},className:"menu__btn",children:"Add to cart"})]})},b=r(12),O=r(4),h=c.a.createContext(),f=function(){return function(e){return function(t){return Object(m.jsx)(h.Consumer,{children:function(r){return Object(m.jsx)(e,Object(O.a)(Object(O.a)({},t),{},{RestoService:r}))}})}}},x=function(e){return{type:"MENU_LOADED",payload:e}},_=function(){return Object(m.jsx)("div",{className:"spinner",children:"loading..."})},v=function(){return Object(m.jsx)("div",{className:"error",children:"Error"})},g=(r(42),function(e){Object(d.a)(r,e);var t=Object(l.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.RestoService,r=e.menuLoaded,n=e.menuRequested;e.menuError;n(),r(t.getDataDB().menu)}},{key:"render",value:function(){var e=this.props,t=e.menuItems,r=e.loading,n=e.error,c=e.addedToCard;return n?Object(m.jsx)(v,{}):r?Object(m.jsx)(_,{}):Object(m.jsx)(y,{menuItems:t,addedToCard:c})}}]),r}(n.Component)),y=function(e){var t=e.menuItems,r=e.addedToCard;return Object(m.jsx)("ul",{className:"menu__list",children:t.map((function(e){return Object(m.jsx)(p,{item:e,onAddToCard:function(){return r(e.id)}},e.id)}))})},N=f()(Object(b.b)((function(e){return{menuItems:e.menu,loading:e.loading,error:e.error}}),(function(e){return{menuLoaded:function(t){e(x(t))},menuRequested:function(){e({type:"MENU_REQUESTED"})},menuError:function(){e({type:"MENU_ERROR"})},addedToCard:function(t){e(function(e){return{type:"ITEM_ADD_TO_CARD",payload:e}}(t))}}}))(g)),E=function(){return Object(m.jsx)(N,{})},C=(r(43),function(e){var t=e.arr,r=e.deleteFromCard,n=e.RestoService;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"cart__title",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437:"}),Object(m.jsx)("div",{className:"cart__list",children:t.map((function(e){var t=e.title,n=e.price,c=e.url,a=e.id,i=e.qtty;return Object(m.jsxs)("div",{className:"cart__item",children:[Object(m.jsx)("img",{src:c,className:"cart__item-img",alt:t}),Object(m.jsx)("div",{className:"cart__item-title",children:t}),Object(m.jsxs)("div",{className:"cart__item-price",children:[n,"$"]}),Object(m.jsx)("div",{onClick:function(){return r(a)},className:"cart__close",children:"\xd7"}),Object(m.jsxs)("div",{className:"cart__order",children:[Object(m.jsx)("div",{className:"cart__quantity",children:i}),Object(m.jsxs)("div",{className:"cart__quantity cart__counter",children:[n*i,"$"]})]})]},a)}))}),Object(m.jsx)("button",{onClick:function(){n.setOrder(R(t))},className:"cart__btn-order",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})}),k=function(){return Object(m.jsx)("div",{className:"cart__title",children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430 :("})},R=function(e){return e.map((function(e){return{id:e.id,qtty:e.qtty}}))},w=f()(Object(b.b)((function(e){return{arr:e.items}}),(function(e){return{deleteFromCard:function(t){e(function(e){return{type:"ITEM_REMOVE_FROM _CARD",payload:e}}(t))}}}))((function(e){var t=e.arr,r=e.deleteFromCard,n=e.RestoService;return 0!==t.length?Object(m.jsx)(C,{arr:t,deleteFromCard:r,RestoService:n}):k()}))),D=function(){return Object(m.jsx)("div",{className:"cart",children:Object(m.jsx)(w,{})})},M=(r(44),r.p+"static/media/404.1062f5e4.png"),I=function(){return Object(m.jsxs)("div",{className:"not-found",children:[Object(m.jsx)("img",{src:M,alt:"not found"}),Object(m.jsx)(j.b,{to:"/",className:"not-found-link",children:"Go to home page"})]})},T=r.p+"static/media/shopping-cart-solid.f0d47d21.svg",P=(r(45),Object(b.b)((function(e){return{totalPrice:e.totalPrice}}))((function(e){e.total;var t=e.totalPrice;return Object(m.jsxs)("header",{className:"header",children:[Object(m.jsx)(j.b,{className:"header__link",to:"/",children:"Menu"}),Object(m.jsxs)(j.b,{className:"header__link",to:"/card",children:[Object(m.jsx)("img",{className:"header__cart",src:T,alt:"cart"}),"Total: ",t," $"]})]})}))),z=function(e){Object(d.a)(r,e);var t=Object(l.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.RestoService,r=e.menuLoaded,n=e.menuRequested,c=e.menuError;n(),t.getMenuItems().then((function(e){return r(e)})).catch((function(){return c()}))}},{key:"render",value:function(){var e=this.props,t=e.menuItems,r=e.loading,n=e.error,c=e.productCard;return n?Object(m.jsx)(v,{}):r?Object(m.jsx)(_,{}):Object(m.jsx)(q,{menuItems:t,productCard:c})}}]),r}(n.Component),q=function(e){var t=e.menuItems,r=e.productCard;return Object(m.jsx)("ul",{className:"menu__list",children:t.map((function(e){return e.id===r?Object(m.jsxs)("li",{className:"menu__item",children:[Object(m.jsx)("div",{className:"menu__title",children:e.title}),Object(m.jsx)("img",{className:"menu__img",src:e.url,alt:e.title}),Object(m.jsxs)("div",{className:"menu__category",children:["Category: ",Object(m.jsx)("span",{children:e.category})]}),Object(m.jsxs)("div",{className:"menu__price",children:["Price: ",Object(m.jsxs)("span",{children:[e.price,"$"]})]}),Object(m.jsx)("button",{className:"menu__btn",children:"Add to cart"})]},e.id):null}))})},S=f()(Object(b.b)((function(e){return{menuItems:e.menu,loading:e.loading,error:e.error}}),(function(e){return{menuLoaded:function(t){e(x(t))},menuRequested:function(){e({type:"MENU_REQUESTED"})},menuError:function(){e({type:"MENU_ERROR"})}}}))(z)),A=function(e){Object(d.a)(r,e);var t=Object(l.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){var e=this.props.location.pathname.replace("/","");return Object(m.jsx)(S,{productCard:Number(e)})}}]),r}(c.a.Component),U=function(e){var t=e.location.pathname.replace("/","");return Object(m.jsx)(S,{productCard:Number(t)})},F=function(e){var t=e.location.pathname.replace("/","");return Object(m.jsx)(S,{productCard:Number(t)})},B=function(e){var t=e.location.pathname.replace("/","");return Object(m.jsx)(S,{productCard:Number(t)})},L=function(e){var t=e.location.pathname.replace("/","");return Object(m.jsx)(S,{productCard:Number(t)})},$=r.p+"static/media/food-bg.fd26761e.jpg",J=function(){return Object(m.jsxs)("div",{style:{background:"url(".concat($,") center center/cover no-repeat")},className:"app",children:[Object(m.jsx)(P,{total:50}),Object(m.jsxs)(s.c,{children:[Object(m.jsx)(s.a,{path:"/",exact:!0,component:E}),Object(m.jsx)(s.a,{path:"/restaurant-menu-react-redux-app",exact:!0,component:E}),Object(m.jsx)(s.a,{path:"/card",exact:!0,component:D}),Object(m.jsx)(s.a,{path:"/1",exact:!0,component:A}),Object(m.jsx)(s.a,{path:"/2",exact:!0,component:U}),Object(m.jsx)(s.a,{path:"/3",exact:!0,component:F}),Object(m.jsx)(s.a,{path:"/4",exact:!0,component:B}),Object(m.jsx)(s.a,{path:"/5",exact:!0,component:L}),Object(m.jsx)(s.a,{exact:!0,component:I})]})]})},Q=function(e){Object(d.a)(r,e);var t=Object(l.a)(r);function r(){var e;Object(o.a)(this,r);for(var n=arguments.length,c=new Array(n),a=0;a<n;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={error:!1},e}return Object(u.a)(r,[{key:"componentDidCatch",value:function(){this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?Object(m.jsx)(v,{}):this.props.children}}]),r}(n.Component),G=r(13),V=r.n(G),H=r(18),K=function(){return{menu:[{title:"Cesar salad",price:12,url:"https://static.1000.menu/img/content/21458/-salat-cezar-s-kr-salat-cezar-s-krevetkami-s-maionezom_1501173720_1_max.jpg",category:"salads",id:1},{title:"Pizza Margherita",price:10,url:"https://www.academiabarilla.it/wp-content/uploads/2017/07/496-pizza-margherita_2.jpg",category:"pizza",id:2},{title:"Pizza Napoletana",price:13,url:"https://www.pizzanapoletana.org/struttura/pagine_bicolor/mobile/decalogo_avpn_1.jpg",category:"pizza",id:3},{title:"Greece salad",price:8,url:"https://assets.epicurious.com/photos/576454fb42e4a5ed66d1df6b/master/pass/greek-salad.jpg",category:"salads",id:4},{title:"Cowboy Steak",price:25,url:"https://i.cbc.ca/1.4491288.1516208229!/fileImage/httpImage/image.jpg_gen/derivatives/16x9_780/cowboysteak.jpg",category:"meat",id:5}]}},W=function(){function e(){Object(o.a)(this,e),this._apiBase="http://localhost:3000"}return Object(u.a)(e,[{key:"getDataDB",value:function(){return K()}},{key:"getResource",value:function(){var e=Object(H.a)(V.a.mark((function e(t){var r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(this._apiBase).concat(t));case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(t,", received ").concat(r.status));case 5:return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMenuItems",value:function(){var e=Object(H.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getResource("/menu/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setOrder",value:function(){var e=Object(H.a)(V.a.mark((function e(t){var r,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrderNumber();case 2:return r=e.sent,n={id:r,order:t},e.next=6,fetch("".concat(this._apiBase,"/orders"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(n)});case 6:if(e.sent.ok){e.next=9;break}throw new Error("json error");case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getOrderNumber",value:function(){var e=Object(H.a)(V.a.mark((function e(){var t,r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getResource("/orders/");case 2:return t=e.sent,r=t.length+1,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),X=r(27),Y=r(20),Z={menu:[],loading:!0,error:!1,items:[],totalPrice:0,quantity:0},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MENU_LOADED":return Object(O.a)(Object(O.a)({},e),{},{menu:t.payload,loading:!1,error:!1});case"MENU_REQUESTED":return Object(O.a)(Object(O.a)({},e),{},{loading:!0,error:!1});case"MENU_ERROR":return Object(O.a)(Object(O.a)({},e),{},{error:!0});case"ITEM_ADD_TO_CARD":var r=t.payload,n=e.menu[r-1],c=e.items.findIndex((function(e){return e.id===r}));if(c>=0){var a=e.items.find((function(e){return e.id===r})),i=Object(O.a)(Object(O.a)({},a),{},{qtty:++a.qtty});return Object(O.a)(Object(O.a)({},e),{},{items:[].concat(Object(Y.a)(e.items.slice(0,c)),[i],Object(Y.a)(e.items.slice(c+1))),totalPrice:e.totalPrice+i.price})}var s={title:n.title,price:n.price,url:n.url,category:n.category,id:n.id,qtty:1};return Object(O.a)(Object(O.a)({},e),{},{items:[].concat(Object(Y.a)(e.items),[s]),totalPrice:e.totalPrice+s.price});case"ITEM_REMOVE_FROM _CARD":var o=[],u=t.payload,d=e.items.findIndex((function(e){return e.id===u})),l=e.items[d].price*e.items[d].qtty;return e.items.forEach((function(e){e.id!==u&&o.push(e)})),Object(O.a)(Object(O.a)({},e),{},{items:o,totalPrice:e.totalPrice-l});default:return e}},te=Object(X.a)(ee),re=(r(47),new W);i.a.render(Object(m.jsx)(b.a,{store:te,children:Object(m.jsx)(Q,{children:Object(m.jsx)(h.Provider,{value:re,children:Object(m.jsx)(j.a,{children:Object(m.jsx)(J,{})})})})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.5fda6d5a.chunk.js.map